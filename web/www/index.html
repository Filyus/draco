<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draco 3D Format Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üî∑ Draco 3D Format Converter</h1>
            <p class="subtitle">Convert between OBJ, PLY, glTF/GLB, and FBX formats with optional Draco compression</p>
        </header>

        <div class="main-content">
            <!-- Module Status -->
            <section class="module-status">
                <h2>WASM Modules</h2>
                <div class="modules-grid">
                    <div class="module-card" id="obj-reader-status">
                        <span class="module-icon">üìñ</span>
                        <span class="module-name">OBJ Reader</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="obj-writer-status">
                        <span class="module-icon">‚úèÔ∏è</span>
                        <span class="module-name">OBJ Writer</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="ply-reader-status">
                        <span class="module-icon">üìñ</span>
                        <span class="module-name">PLY Reader</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="ply-writer-status">
                        <span class="module-icon">‚úèÔ∏è</span>
                        <span class="module-name">PLY Writer</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="gltf-reader-status">
                        <span class="module-icon">üìñ</span>
                        <span class="module-name">glTF Reader</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="gltf-writer-status">
                        <span class="module-icon">‚úèÔ∏è</span>
                        <span class="module-name">glTF Writer</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="fbx-reader-status">
                        <span class="module-icon">üìñ</span>
                        <span class="module-name">FBX Reader</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                    <div class="module-card" id="fbx-writer-status">
                        <span class="module-icon">‚úèÔ∏è</span>
                        <span class="module-name">FBX Writer</span>
                        <span class="status-indicator loading">Loading...</span>
                    </div>
                </div>
            </section>

            <!-- File Input -->
            <section class="file-input-section">
                <h2>Input File</h2>
                <div class="drop-zone" id="drop-zone">
                    <div class="drop-zone-content">
                        <span class="drop-icon">üìÅ</span>
                        <p>Drag & drop a 3D file here</p>
                        <p class="formats">Supported: .obj, .ply, .gltf, .glb, .fbx</p>
                        <label class="file-input-label">
                            <input type="file" id="file-input" accept=".obj,.ply,.gltf,.glb,.fbx">
                            Or click to browse
                        </label>
                    </div>
                </div>
                <div class="file-info" id="file-info" style="display: none;">
                    <div class="file-details">
                        <span class="file-name" id="file-name"></span>
                        <span class="file-size" id="file-size"></span>
                    </div>
                    <button class="clear-btn" id="clear-file">‚úï</button>
                </div>
            </section>

            <!-- Mesh Preview -->
            <section class="preview-section" id="preview-section" style="display: none;">
                <h2>Mesh Information</h2>
                <div class="mesh-stats">
                    <div class="stat">
                        <span class="stat-label">Meshes</span>
                        <span class="stat-value" id="mesh-count">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Vertices</span>
                        <span class="stat-value" id="vertex-count">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Triangles</span>
                        <span class="stat-value" id="triangle-count">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Has Normals</span>
                        <span class="stat-value" id="has-normals">No</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Has UVs</span>
                        <span class="stat-value" id="has-uvs">No</span>
                    </div>
                </div>
                <div class="warnings" id="warnings-container" style="display: none;">
                    <h3>‚ö†Ô∏è Warnings</h3>
                    <ul id="warnings-list"></ul>
                </div>
            </section>

            <!-- Export Options -->
            <section class="export-section" id="export-section" style="display: none;">
                <h2>Export</h2>
                <div class="export-options">
                    <div class="option-group">
                        <label for="export-format">Output Format</label>
                        <select id="export-format">
                            <option value="obj">OBJ (.obj)</option>
                            <option value="ply">PLY (.ply)</option>
                            <option value="gltf">glTF (.gltf)</option>
                            <option value="glb" selected>GLB (.glb)</option>
                            <option value="fbx">FBX (.fbx)</option>
                        </select>
                    </div>

                    <div class="option-group draco-options" id="draco-options">
                        <label>
                            <input type="checkbox" id="use-draco" checked>
                            Use Draco Compression
                        </label>
                        <div class="draco-settings" id="draco-settings">
                            <div class="slider-group">
                                <label for="position-bits">Position Quantization: <span id="position-bits-value">14</span> bits</label>
                                <input type="range" id="position-bits" min="8" max="16" value="14">
                            </div>
                            <div class="slider-group">
                                <label for="normal-bits">Normal Quantization: <span id="normal-bits-value">10</span> bits</label>
                                <input type="range" id="normal-bits" min="6" max="14" value="10">
                            </div>
                            <div class="slider-group">
                                <label for="texcoord-bits">TexCoord Quantization: <span id="texcoord-bits-value">12</span> bits</label>
                                <input type="range" id="texcoord-bits" min="8" max="14" value="12">
                            </div>
                        </div>
                    </div>

                    <div class="option-group other-options">
                        <label>
                            <input type="checkbox" id="include-normals" checked>
                            Include Normals
                        </label>
                        <label>
                            <input type="checkbox" id="include-uvs" checked>
                            Include UVs
                        </label>
                    </div>
                </div>

                <button class="export-btn" id="export-btn">
                    <span class="btn-icon">üíæ</span>
                    Export
                </button>
            </section>

            <!-- Console -->
            <section class="console-section">
                <h2>Console</h2>
                <div class="console" id="console">
                    <div class="console-line info">Ready. Load a 3D file to begin.</div>
                </div>
            </section>
        </div>

        <footer>
            <p>Powered by <a href="https://github.com/google/draco" target="_blank">Draco</a> compression library</p>
        </footer>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
